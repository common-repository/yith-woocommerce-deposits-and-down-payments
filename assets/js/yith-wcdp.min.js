jQuery(document).ready(function(a){var k=a("form.cart"),g=a('input[name="payment_type"]'),f=a(".yith-wcdp-deposit-shipping"),l=f.find(".yith-wcdp-shipping-form"),n=null,r=function(){g.length?g.on("change",function(){var d=a(this),e=d.val();d.is(":checked")&&("deposit"==e?f.slideDown():f.slideUp())}).change():f.length&&f.slideDown()},p=function(d){f=k.find(".yith-wcdp-deposit-shipping");g=a('input[name="payment_type"]');f.length&&(r(),a.ajax({beforeSend:function(){f.block({message:null,overlayCSS:{background:"#fff",
            opacity:.6}})},complete:function(){f.unblock()},data:{product_id:d.variation_id,qty:k.find('input[name="quantity"]').val(),action:yith_wcdp.actions.calculate_shipping},dataType:"json",method:"post",success:function(a){l.find("table").html(a.template)},url:yith_wcdp.ajax_url}))};k.on("found_variation",function(d,e){var c=a(this),f=c.find(".woocommerce-variation-add-to-cart"),b=c.find(".yith-wcdp-single-add-to-cart-fields"),q=b.find(".full-price"),t=b.find(".deposit-price"),u=b.data("deposit-type"),
    m=b.data("deposit-amount"),k=b.data("deposit-rate"),g=b.data("price-template"),h=0,l="";h=0;h="";yith_wcdp.ajax_variations?n=a.ajax({beforeSend:function(){null!=n&&n.abort();c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){c.unblock()},data:{variation_id:e.variation_id,action:"get_deposit_template"},dataType:"html",success:function(d){b.length&&b.parent().remove();f.before(d);b=c.find(".yith-wcdp-single-add-to-cart-fields");p(e);a(document).trigger("yith_wcpb_ajax_update_price_request")},
    url:yith_wcdp.ajax_url}):"undefined"!==typeof e.add_deposit_to_cart?(b.length&&b.parent().remove(),f.before(e.add_deposit_to_cart),p(e)):b.length&&(h=e.display_price.toFixed(2),l="( "+g.replace("0",h)+" )",h="amount"==u?Math.min(h,m).toFixed(2):Math.min(h,h*k/100).toFixed(2),h="( "+g.replace("0",h)+" )",q.html(l),t.html(h),p(e))}).on("reset_data",function(){var d=a("#yith-wcdp-add-deposit-to-cart");d.parents(".variations_form").length&&yith_wcdp.variations_handling&&d.remove()}).on("click",".reset_variations",
    function(){a("#yith-wcdp-add-deposit-to-cart").hide()}).on("click",'#yith-wcdp-add-deposit-to-cart button[name="calc_shipping"]',function(d){d.preventDefault();var e=a(this);d=a("form.cart");var c=d.find('button[name="add-to-cart"]').val(),g=d.find('input[name="variation_id"]').val(),b=e.closest(".shipping-calculator-form");e=b.find("#calc_shipping_country").val();var q=b.find("#calc_shipping_city").val(),k=b.find("#calc_shipping_state").val();b=b.find("#calc_shipping_postcode").val();c||g||(c=d.find('input[name="add-to-cart"]').val());
    c&&a.ajax({beforeSend:function(){f.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){f.unblock()},data:{action:yith_wcdp.actions.change_location,product_id:g?g:c,qty:d.find('input[name="quantity"]').val(),calc_shipping_country:e,calc_shipping_city:q,calc_shipping_state:k,calc_shipping_postcode:b},dataType:"json",method:"post",success:function(b){a(".shipping-calculator-form").slideUp("slow");l.find("table").html(b.template);"undefined"!=typeof b.notices&&(f.prepend(a("<div>").addClass("yith-wcdp-messages").html(b.notices)).slideDown(),
            window.setTimeout(function(){a(".yith-wcdp-messages").slideUp("slow",function(){a(this).remove()})},3E3))},url:yith_wcdp.ajax_url})}).find("select:eq(0)").change();a(document).on("yith_wcevti_price_refreshed yith_wapo_product_price_updated yith_wcp_price_updated",function(d,e){var c=a(".yith-wcdp-single-add-to-cart-fields"),f=c.find(".full-price"),b=c.find(".deposit-price"),g=c.data("deposit-type"),k=c.data("deposit-amount"),l=c.data("deposit-rate"),m=c.data("price-template"),n=a(".ywcp_wcp_group_total");
    !c.length||1==n.length&&"yith_wapo_product_price_updated"==d.type||(c="( "+m.replace("0",e)+" )",g="amount"==g?Math.min(e,k).toFixed(2):Math.min(e,e*l/100).toFixed(2),m="( "+m.replace("0",g)+" )",f.html(c),b.html(m))});(function(){a(".shipping-calculator-form").hide();r();a(document).on("click",".shipping-calculator-button",function(){a(".shipping-calculator-form").slideToggle("slow",function(){a("body").trigger("country_to_state_changed")});return!1})})()});